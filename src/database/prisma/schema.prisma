// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Livro {
  livroId    Int    @id @default(autoincrement()) @map("livro_id")
  titulo     String @unique
  categoria  String
  quantidade Int    @default(0)

  retiradas RetiradaLivro[]
}

model RetiradaLivro {
  retirada_id    Int      @id @default(autoincrement())
  quantidade_livro Int
  motivo_retirada String
  contato         String
  data_retirada   DateTime @default(now())
  data_retorno    DateTime?
  usuario_id      Int
  livro_id        Int

  usuario         Usuario @relation(fields: [usuario_id], references: [id])
  livro           Livro   @relation(fields: [livro_id], references: [livroId])  // Corrigir de livro_id para livroId

  @@map("retirada_livro")  // Nome da tabela no banco de dados
}

model Usuario {
  id              Int              @id @default(autoincrement())
  nome            String           @unique
  data_nascimento DateTime        @db.Date
  email           String @unique @db.VarChar(100)
  senha_hash      String       

  retiradas RetiradaLivro[]
}

model login {
  id         Int    @id @default(autoincrement())
  email      String @unique @db.VarChar(100)
  senha_hash String
}

